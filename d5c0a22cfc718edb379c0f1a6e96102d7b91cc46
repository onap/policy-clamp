{
  "comments": [
    {
      "key": {
        "uuid": "e83b2891_51cbf952",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-07-06T15:00:16Z",
      "side": 1,
      "message": "so this isn\u0027t for scope\u003dtest anymore",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d14fb1a1_dd4022b2",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 2787
      },
      "writtenOn": "2021-07-06T15:23:12Z",
      "side": 1,
      "message": "No, the Springboot applications won\u0027t start if the scope is test. This caught us because of course the unit tests all worked, it was only when we ran the springboot applications outside of the unit tests that we discovered this.",
      "parentUuid": "e83b2891_51cbf952",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da17c512_ad9b7eef",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 477
      },
      "writtenOn": "2021-07-07T00:49:41Z",
      "side": 1,
      "message": "In theory, the springfox-boot-starter library (line 39) pulls transitively versions of older swagger-models versions (1.5.X) so this may not be needed if you are not using policy-endpoints or other base, that pulls the 1.6.x versions pulled in by other libraries ie. policy-endpoints.   I discovered that recently as in the case of drools-apps, the 1.5.x swagger-modesl are picked up transitively into the classpath and were in conflict with 1.6.x swagger libraries from policy-common breaking the telemetry api in honolulu and master.  FYI, as here you may end up in classpath with similar configuration with this library, conflicting with the one pulled in in an older version from line 139.",
      "parentUuid": "d14fb1a1_dd4022b2",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5d638c0_04acd8fa",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 2787
      },
      "writtenOn": "2021-07-07T10:17:11Z",
      "side": 1,
      "message": "I dug into this for the last few hours. It seems that Swagger has changed its group name from \"io.swagger\" to \"io.swagger.core.v3\". 1.6.2 is the last version of the \"io.swagger\" group but \"2.1.10\" is the latest version of the \"io.swagger.core.v3\" group.\n\nFor example 1.6.2 See:\nhttps://mvnrepository.com/artifact/io.swagger/swagger-annotations\nand:\n2.1.10 https://mvnrepository.com/artifact/io.swagger.core.v3/swagger-annotations\n\nNow, the Swagger dependencies are used in common and models as well as CLAMP. I will upgrade swagger for all the components in subsequent reviews.\n\nHowever, this issue is blocking us in CLAMP, we can\u0027t get our builds and tests to work without this change so would it be OK to merge this change to bring everything up to 1.6.2 and I\u0027ll upgrade the swagger on everything in later reviews?",
      "parentUuid": "da17c512_ad9b7eef",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ecd703c2_8b69e7a6",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-07-07T11:42:43Z",
      "side": 1,
      "message": "should we merge, even though this doesn\u0027t build?",
      "parentUuid": "b5d638c0_04acd8fa",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5b2f07a8_a823312e",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 477
      },
      "writtenOn": "2021-07-07T12:13:15Z",
      "side": 1,
      "message": "Liam, the spring-boot-starter in line 139 pulls in the 1.5.20 versions of swagger-common and swagger-annotations (not the 2.1.10 from io.swagger.core.v3), those must be received if you see them from something else, which would be a 3 way conflict, 1.5.20, 1.6.2x, and 2.1.x.   1.5.x and 1.6.2x have incompatibilities which is the problem I was hitting.",
      "parentUuid": "ecd703c2_8b69e7a6",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7146da90_4ff2ca0d",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 2787
      },
      "writtenOn": "2021-07-07T12:58:12Z",
      "side": 1,
      "message": "@Jim it should build now that Saul\u0027s review is merged\n@Jorge the springboot is pulling in the 2.1.2 in CLAMP, it\u0027s coming in springfox-boot-starter\n    \u003cgroupId\u003eio.swagger.core.v3\u003c/groupId\u003e\n    \u003cartifactId\u003eswagger-models\u003c/artifactId\u003e\n\nThis looks like a right mess.\n\nThis review fixes our problems in CLAMP for now, could we pull it in and then investigate he Swagger issues in a separate JIRA?",
      "parentUuid": "ecd703c2_8b69e7a6",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6527e029_f5a54030",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 477
      },
      "writtenOn": "2021-07-07T13:19:52Z",
      "side": 1,
      "message": "FYI from when I was looking yesterday, the  springfox-swagger2 3.0.0 pom (included from springfox-boot-starter 3.0.0): https://repo1.maven.org/maven2/io/springfox/springfox-swagger2/3.0.0/springfox-swagger2-3.0.0.pom that pulls in the 1.5.20 jars.  I think I concluded that was coming here when it was showing up in my classpath together with the 1.6.x versions.",
      "parentUuid": "7146da90_4ff2ca0d",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c2a7cb4_6fd4d010",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 2787
      },
      "writtenOn": "2021-07-07T14:15:40Z",
      "side": 1,
      "message": "Looks like excluding the dependencies won\u0027t work, When we try to start the CLAMP backend we get the following exceptions:\n\nCaused by: java.lang.IllegalStateException: Failed to introspect Class [springfox.documentation.oas.mappers.ServiceModelToOpenApiMapperImpl] from ClassLoader [org.springframework.boot.loader.LaunchedURLClassLoader@63c12fb0]\n\tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:481)\n\tat org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:321)\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:267)\n\t... 40 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: io/swagger/v3/oas/models/info/Contact\n\tat java.base/java.lang.Class.getDeclaredMethods0(Native Method)\n\tat java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3166)\n\tat java.base/java.lang.Class.getDeclaredMethods(Class.java:2309)\n\tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:463)\n\t... 42 common frames omitted\nCaused by: java.lang.ClassNotFoundException: io.swagger.v3.oas.models.info.Contact\n\tat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:471)\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:589)\n\tat org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)",
      "parentUuid": "6527e029_f5a54030",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c57e2c4_90022af9",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-07-07T14:26:06Z",
      "side": 1,
      "message": "I was thinking we\u0027d exclude it in policy-parent, and then explicitly include it in policy-clamp.  Or since the java package names are different, we don\u0027t necessarily need to exclude it at all.  Instead, we could just modify that one new class in policy-common to use the new swagger-models/annotations, while leaving the old policy-endpoints code alone (i.e., using the old annotations).\n\nOr is that the rub?  policy-clamp needs policy-endpoints, but with the new annotations?  If so, we could use both the old AND new annotations in policy-endpoints, but hopefully limit such as mess to that one jar.",
      "parentUuid": "5c2a7cb4_6fd4d010",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a02a3ee0_99ac86ab",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 2787
      },
      "writtenOn": "2021-07-07T14:59:23Z",
      "side": 1,
      "message": "It\u0027s only the Springboot/Springfox that\u0027s using the new annotations. None of our direct classes are using the new annotations at the moment (the next patch takes out the only usage).",
      "parentUuid": "0c57e2c4_90022af9",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a71ce93_86ddd072",
        "filename": "pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 2787
      },
      "writtenOn": "2021-07-09T10:44:30Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a02a3ee0_99ac86ab",
      "revId": "d5c0a22cfc718edb379c0f1a6e96102d7b91cc46",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}