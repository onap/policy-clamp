{
  "info": {
    "name": "CL-http-participant",
    "_postman_id": "cd83c1ac-bc96-41f2-a5a4-f021015461b7",
    "description": "",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "id": "45fed070-6a8f-4e0a-a3cf-904db5596984",
      "name": "Get Instantiated Control loops",
      "request": {
        "url": {
          "protocol": "https",
          "host": "localhost",
          "path": [
            "onap",
            "controlloop",
            "v2",
            "instantiation"
          ],
          "port": "6969"
        },
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "*/*",
            "disabled": false
          }
        ],
        "body": {
          "mode": "raw",
          "disabled": false
        },
        "description": ""
      },
      "response": [
        {
          "header": [],
          "code": 200,
          "name": "Response_200",
          "id": "5727aa3e-5f62-426b-9a37-ddae2d346165"
        }
      ]
    },
    {
      "id": "1bf1a143-38fd-49b8-afab-4c801546ba3b",
      "name": "Update a Control loop",
      "request": {
        "url": {
          "protocol": "https",
          "host": "localhost",
          "path": [
            "onap",
            "controlloop",
            "v2",
            "instantiation/command"
          ],
          "port": "6969"
        },
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "description": "",
            "disabled": false
          },
          {
            "key": "X-ONAP-RequestID",
            "value": "709c62b3-8918-41b9-a747-d21eb79c6c20",
            "description": "",
            "disabled": false
          },
          {
            "key": "Accept",
            "value": "*/*",
            "disabled": false
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"orderedState\": \"PASSIVE\",\r\n  \"controlLoopIdentifierList\": [\r\n    {\r\n      \"name\": \"K8SInstance0\",\r\n      \"version\": \"1.0.1\"\r\n    }\r\n  ]\r\n}",
          "disabled": false
        },
        "description": ""
      },
      "response": [
        {
          "header": [],
          "code": 200,
          "name": "Response_200",
          "id": "f619f68b-4dbe-4c3d-8236-e90ea85c4094"
        }
      ]
    },
    {
      "id": "e5b64f76-c4f5-4c23-b273-e2d6cfb48cd7",
      "name": "UnInitialise a Control loop",
      "request": {
        "url": {
          "protocol": "https",
          "host": "localhost",
          "path": [
            "onap",
            "controlloop",
            "v2",
            "instantiation/command"
          ],
          "port": "6969"
        },
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "description": "",
            "disabled": false
          },
          {
            "key": "Accept",
            "value": "*/*",
            "disabled": false
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"orderedState\": \"UNINTIALISED\",\r\n  \"controlLoopIdentifierList\": [\r\n    {\r\n      \"name\": \"K8SInstance0\",\r\n      \"version\": \"1.0.1\"\r\n    }\r\n  ]\r\n}",
          "disabled": false
        },
        "description": ""
      },
      "response": [
        {
          "header": [],
          "code": 200,
          "name": "Response_200",
          "id": "bc8e0792-85df-4934-9f55-69eaf8535fe3"
        }
      ]
    },
    {
      "id": "4f359a02-cd9a-4ffd-b594-3478bf32cc2f",
      "name": "Instantiate a Control loop",
      "request": {
        "url": {
          "protocol": "https",
          "host": "localhost",
          "path": [
            "onap",
            "controlloop",
            "v2",
            "instantiation"
          ],
          "port": "6969"
        },
        "method": "POST",
        "header": [
          {
            "key": "X-ONAP-RequestID",
            "value": "709c62b3-8918-41b9-a747-d21eb79c6c20",
            "description": "",
            "disabled": false
          },
          {
            "key": "Content-Type",
            "value": "application/json",
            "description": "",
            "disabled": false
          },
          {
            "key": "Accept",
            "value": "*/*",
            "disabled": false
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"controlLoopList\": [\r\n    {\r\n      \"name\": \"ConsulInstance0\",\r\n      \"version\": \"1.0.1\",\r\n      \"definition\": {\r\n        \"name\": \"org.onap.domain.sample.PMSH_Http_ControlLoopDefinition\",\r\n        \"version\": \"1.2.3\"\r\n      },\r\n      \"state\": \"UNINITIALISED\",\r\n      \"orderedState\": \"UNINITIALISED\",\r\n      \"description\": \"PMSH control loop instance 0\",\r\n      \"elements\": {\r\n        \"709c62b3-8918-41b9-a747-d21eb79c6c25\": {\r\n          \"id\": \"709c62b3-8918-41b9-a747-d21eb79c6c25\",\r\n          \"definition\": {\r\n            \"name\": \"org.onap.domain.database.Http_PMSHMicroserviceControlLoopElement\",\r\n            \"version\": \"1.2.3\"\r\n          },\r\n          \"participantId\": {\r\n            \"name\": \"org.onap.controlloop.HttpControlLoopParticipant\",\r\n            \"version\": \"2.3.4\"\r\n          },\r\n          \"participantType\": {\r\n            \"name\": \"org.onap.controlloop.HttpControlLoopParticipant\",\r\n            \"version\": \"2.3.4\"\r\n          },\r\n          \"state\": \"UNINITIALISED\",\r\n          \"orderedState\": \"UNINITIALISED\",\r\n          \"description\": \"DCAE Control Loop Element for the PMSH instance 0 control loop\"\r\n        }\r\n      }\r\n    }\r\n  ]\r\n}",
          "disabled": false
        },
        "description": ""
      },
      "response": [
        {
          "header": [],
          "code": 200,
          "name": "Response_200",
          "id": "dbdea1c3-05fe-4757-b9a2-74a16d065a12"
        }
      ]
    },
    {
      "id": "ad24b4ac-c6f2-4444-97a7-90b007814ba6",
      "name": "Commission a Control loop",
      "request": {
        "url": {
          "protocol": "https",
          "host": "localhost",
          "path": [
            "onap",
            "controlloop",
            "v2",
            "commission"
          ],
          "port": "6969"
        },
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/yaml",
            "description": "",
            "disabled": false
          },
          {
            "key": "X-ONAP-RequestID",
            "value": "709c62b3-8918-41b9-a747-d21eb79c6c20",
            "description": "",
            "disabled": false
          },
          {
            "key": "Accept",
            "value": "*/*",
            "disabled": false
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "tosca_definitions_version: tosca_simple_yaml_1_3\ndata_types:\n  onap.datatypes.ToscaConceptIdentifier:\n    derived_from: tosca.datatypes.Root\n    properties:\n      name:\n        type: string\n        required: true\n      version:\n        type: string\n        required: true\n\n  org.onap.datatypes.policy.clamp.controlloop.httpControlLoopElement.RestRequest:\n    version: 1.0.0\n    derived_from: tosca.datatypes.Root\n    properties:\n      restRequestId:\n        type:  onap.datatypes.ToscaConceptIdentifier\n        typeVersion: 1.0.0\n        required: true\n        description: The name and version of a REST request to be sent to a REST endpoint\n      httpMethod:\n        type: string\n        required: true\n        constraints:\n          - valid_values: [POST, PUT, GET, DELETE]\n        description: The REST method to use\n      path:\n        type: string\n        required: true\n        description: The path of the REST request relative to the base URL\n      body:\n        type: string\n        required: false\n        description: The body of the REST request for PUT and POST requests\n      expectedResponse:\n        type: integer\n        required: true\n        constraints:\n          - in_range: [100, 599]\n        description: THe expected HTTP status code for the REST request\n    org.onap.datatypes.policy.clamp.controlloop.httpControlLoopElement.ConfigurationEntity:\n      version: 1.0.0\n      derived_from: tosca.datatypes.Root\n      properties:\n        configurationEntityId:\n          type:  onap.datatypes.ToscaConceptIdentifier\n          typeVersion: 1.0.0\n          required: true\n          description: The name and version of a Configuration Entity to be handled by the HTTP Control Loop Element\n        restSequence:\n          type: list\n          entry_schema:\n            type: org.onap.datatypes.policy.clamp.controlloop.httpControlLoopElement.RestRequest\n            typeVersion: 1.0.0\n          description: A sequence of REST commands to send to the REST endpoint\n\n\nnode_types:\n  org.onap.policy.clamp.controlloop.Participant:\n    version: 1.0.1\n    derived_from: tosca.nodetypes.Root\n    properties:\n      provider:\n        type: string\n        requred: false\n  org.onap.policy.clamp.controlloop.ControlLoopElement:\n    version: 1.0.1\n    derived_from: tosca.nodetypes.Root\n    properties:\n      provider:\n        type: string\n        requred: false\n      participant_id:\n        type: onap.datatypes.ToscaConceptIdentifier\n        requred: true\n  org.onap.policy.clamp.controlloop.ControlLoop:\n    version: 1.0.1\n    derived_from: tosca.nodetypes.Root\n    properties:\n      provider:\n        type: string\n        requred: false\n      elements:\n        type: list\n        required: true\n        entry_schema:\n          type: onap.datatypes.ToscaConceptIdentifier\n  org.onap.policy.clamp.controlloop.HttpControlLoopElement:\n    version: 1.0.1\n    derived_from: org.onap.policy.clamp.controlloop.ControlLoopElement\n    properties:\n      baseUrl:\n        type: string\n        required: true\n        description: The base URL to be prepended to each path, identifies the host for the REST endpoints.\n      httpHeaders:\n        type: map\n        required: false\n        entry_schema:\n          type: string\n        description: HTTP headers to send on REST requests\n      configurationEntities:\n        type: map\n        required: true\n        entry_schema:\n          type: org.onap.datatypes.policy.clamp.controlloop.httpControlLoopElement.ConfigurationEntity\n          typeVersion: 1.0.0\n        description: The connfiguration entities the Control Loop Element is managing and their associated REST requests\ntopology_template:\n  node_templates:\n    org.onap.controlloop.HttpControlLoopParticipant:\n      version: 2.3.4\n      type: org.onap.policy.clamp.controlloop.Participant\n      type_version: 1.0.1\n      description: Participant for Http requests\n      properties:\n        provider: ONAP\n\n    org.onap.domain.database.Http_PMSHMicroserviceControlLoopElement:\n      # Http config for PMSH.\n      version: 1.2.3\n      type: org.onap.policy.clamp.controlloop.HttpControlLoopElement\n      type_version: 1.0.1\n      description: Control loop element for the http requests of PMSH microservice\n      properties:\n        provider: ONAP\n        participant_id:\n          name: org.onap.controlloop.HttpControlLoopParticipant\n          version: 2.3.4\n        uninitializedToPassiveTimeout: 180\n        baseUrl: http://10.152.183.51:8500\n        httpHeaders:\n          Content-Type: application/json\n        configurationEntities:\n          - configurationEntityId:\n              name: entity1\n              version: 1.0.1\n            restSequence:\n              - restRequestId:\n                  name: request1\n                  version: 1.0.1\n                httpMethod: PUT\n                path: v1/kv/dcae-pmsh\n                body: '{\n      \"control_loop_name\":\"pmsh-control-loop\",\n      \"operational_policy_name\":\"pmsh-operational-policy\",\n      \"aaf_password\":\"demo123456!\",\n      \"aaf_identity\":\"dcae@dcae.onap.org\",\n      \"cert_path\":\"/opt/app/pmsh/etc/certs/cert.pem\",\n      \"key_path\":\"/opt/app/pmsh/etc/certs/key.pem\",\n      \"ca_cert_path\":\"/opt/app/pmsh/etc/certs/cacert.pem\",\n      \"enable_tls\":\"true\",\n      \"pmsh_policy\":{\n         \"subscription\":{\n            \"subscriptionName\":\"ExtraPM-All-gNB-R2B\",\n            \"administrativeState\":\"UNLOCKED\",\n            \"fileBasedGP\":15,\n            \"fileLocation\":\"\\/pm\\/pm.xml\",\n            \"nfFilter\":{\n               \"nfNames\":[\n                  \"^pnf.*\",\n                  \"^vnf.*\"\n               ],\n               \"modelInvariantIDs\":[\n               ],\n               \"modelVersionIDs\":[\n               ],\n               \"modelNames\":[\n               ]\n            },\n            \"measurementGroups\":[\n               {\n                  \"measurementGroup\":{\n                     \"measurementTypes\":[\n                        {\n                           \"measurementType\":\"countera\"\n                        },\n                        {\n                           \"measurementType\":\"counterb\"\n                        }\n                     ],\n                     \"managedObjectDNsBasic\":[\n                        {\n                           \"DN\":\"dna\"\n                        },\n                        {\n                           \"DN\":\"dnb\"\n                        }\n                     ]\n                  }\n               },\n               {\n                  \"measurementGroup\":{\n                     \"measurementTypes\":[\n                        {\n                           \"measurementType\":\"counterc\"\n                        },\n                        {\n                           \"measurementType\":\"counterd\"\n                        }\n                     ],\n                     \"managedObjectDNsBasic\":[\n                        {\n                           \"DN\":\"dnc\"\n                        },\n                        {\n                           \"DN\":\"dnd\"\n                        }\n                     ]\n                  }\n               }\n            ]\n         }\n      },\n      \"streams_subscribes\":{\n         \"aai_subscriber\":{\n            \"type\":\"message_router\",\n            \"dmaap_info\":{\n               \"topic_url\":\"https://10.152.183.151:3905/events/AAI_EVENT\",\n               \"client_role\":\"org.onap.dcae.aaiSub\",\n               \"location\":\"san-francisco\",\n               \"client_id\":\"1575976809466\"\n            }\n         },\n         \"policy_pm_subscriber\":{\n            \"type\":\"message_router\",\n            \"dmaap_info\":{\n               \"topic_url\":\"https://10.152.183.151:3905/events/org.onap.dmaap.mr.PM_SUBSCRIPTIONS\",\n               \"client_role\":\"org.onap.dcae.pmSubscriber\",\n               \"location\":\"san-francisco\",\n               \"client_id\":\"1575876809456\"\n            }\n         }\n      },\n      \"streams_publishes\":{\n         \"policy_pm_publisher\":{\n            \"type\":\"message_router\",\n            \"dmaap_info\":{\n               \"topic_url\":\"https://10.152.183.151:3905/events/org.onap.dmaap.mr.PM_SUBSCRIPTIONS\",\n               \"client_role\":\"org.onap.dcae.pmPublisher\",\n               \"location\":\"san-francisco\",\n               \"client_id\":\"1475976809466\"\n            }\n         },\n         \"other_publisher\":{\n            \"type\":\"message_router\",\n            \"dmaap_info\":{\n               \"topic_url\":\"https://10.152.183.151:3905/events/org.onap.dmaap.mr.SOME_OTHER_TOPIC\",\n               \"client_role\":\"org.onap.dcae.pmControlPub\",\n               \"location\":\"san-francisco\",\n               \"client_id\":\"1875976809466\"\n            }\n         }\n      }\n   }'\n                expectedResponse: 200\n\n\n    org.onap.domain.sample.PMSH_Http_ControlLoopDefinition:\n      version: 1.2.3\n      type: org.onap.policy.clamp.controlloop.ControlLoop\n      type_version: 1.0.0\n      description: Control loop for HTTP request to Consul\n      properties:\n        provider: ONAP\n        elements:\n          - name: org.onap.domain.database.Http_PMSHMicroserviceControlLoopElement\n            version: 1.2.3",
          "disabled": false
        },
        "description": ""
      },
      "response": [
        {
          "header": [],
          "code": 200,
          "name": "Response_200",
          "id": "0e98286f-2143-4af9-a291-4f3719b2cedb"
        }
      ]
    }
  ],
  "variable": [],
  "auth": {
    "type": "basic",
    "basic": {
      "username": "runtimeUser",
      "password": "zb!XztG34"
    }
  }
}